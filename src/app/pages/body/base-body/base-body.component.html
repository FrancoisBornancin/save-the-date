<ng-container *ngIf="this.adminManager.isPreviewActive">
    <p-button (click)="this.adminManager.disactivatePreview()">Disactivate Preview</p-button>
</ng-container>
<ng-container *ngIf="!this.adminManager.isPreviewActive">
    <p-button (click)="this.adminManager.activatePreview()">Activate Preview</p-button>
</ng-container>
<ng-container *ngIf="!this.adminManager.isPreviewActive">
    <p-button (click)="this.saveImage()">SaveImage</p-button>
    <p-button (click)="this.saveLayout()">SaveLayout</p-button>
    <ng-container *ngIf="!this.generalInfoModalRendered">
        <p-button (onClick)="this.printGeneralInfoModal()">GeneralInfo</p-button>
    </ng-container>
    <ng-container *ngIf="this.generalInfoModalRendered">
        <p-button (onClick)="this.doNotPrintGeneralInfoModal()">No GeneralInfo</p-button>
        <div style="background-color: #d3d3d3; margin: 10px; padding: 10px;"> 
            <p><strong>Comment fonctionne cette application:</strong></p>
            <p><em>Gestion et sauvegarde des visuels:</em></p>
            <p>Tu vas pouvoir travailler sur 5 visuels max par page.
            Si tu travailles sur un visuel en index 1 mais que tu
            veux basculer sur un visuel en autre index tu le pourras
            sans perdre aucun informatione <strong>tant que tu restes
            sur cette page!</strong></p>
            <p>La sauvegarde (image ou layout) n'est là que pour être capable
            de récupérer ton travail après un changement de page ou une
            déconnexion. Ce qui signifie que si tu n'enregistre pas ton travail
            mais souhaite changer de page ou te reconnecter, il sera perdu.</p>
            <p><em>Image, texte, couleur et disposition: </em></p>
            <p>Tu vas pouvoir: </p>
            <ul><li>Charger des images à la volée depuis ton portable</li></ul>
            <ul><li>Tester du texte</li></ul>
            <ul><li>Tester des tailles, couleurs et polices de charactères</li></ul>
            <ul><li>Tester un fond de couleur, son opacité, sa hauteur et largeur</li></ul>
            <p><strong>Enjoy chaton!</strong></p>
        </div>
    </ng-container>
    <ng-container *ngIf="this.backgroundDataRendered">
        <ng-container *ngIf="!this.borderDataRendered">
            <p-button (onClick)="this.printBorderData()">BorderData</p-button>    
        </ng-container>
        <p-button (onClick)="this.doNotPrintBackgroundData()">No BackgroundData</p-button>
        <ng-container *ngIf="this.borderDataRendered">
            <p-button (onClick)="this.doNotPrintBorderData()">No BorderData</p-button>    
            <div style="display: flex; align-items: center; gap: 1rem;">
                <p-knob [(ngModel)]="this.borderRadius" [min]="0" [max]="100"></p-knob>
                <p-knob [(ngModel)]="this.borderSize" [min]="0" [max]="50"></p-knob>
                <p-colorPicker [(ngModel)]="this.borderColor"></p-colorPicker>
            </div>
        </ng-container>
        <ng-container *ngIf="this.insideBackgroundDataRendered">
            <p-button (onClick)="this.doNotPrintInsideBackgroundData()">No InsideBackgroundrData</p-button>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <p-knob [(ngModel)]="this.backgroundOpacity" [min]="0" [max]="100"></p-knob>
                <p-knob [(ngModel)]="this.backgroundWidth" [min]="0" [max]="100"></p-knob>
                <p-knob [(ngModel)]="this.backgroundHeight" [min]="0" [max]="100"></p-knob>
                <p-colorPicker [(ngModel)]="this.backgroundColor"></p-colorPicker>
            </div>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <p-knob [(ngModel)]="this.backgroundPaddingTop" [min]="0"></p-knob>
            </div>    
        </ng-container>
        <ng-container *ngIf="!this.insideBackgroundDataRendered">
            <p-button (onClick)="this.printInsideBackgroundData()">InsideBackgroundrData</p-button>
        </ng-container>
    </ng-container>
    <ng-container *ngIf="!this.backgroundDataRendered">
        <p-button (onClick)="this.printBackgroundData()">BackgroundData</p-button>
    </ng-container>
    <ng-container *ngIf="!this.textDataRendered">
        <p-button (onClick)="this.printTextData()">textData</p-button>
    </ng-container>
    <ng-container *ngIf="this.textDataRendered">
        <p-button (onClick)="this.doNotPrintTextData()">no TextData</p-button>
        <ng-container *ngIf="!this.textModalRendered">
            <p-button (onClick)="this.printTextModal()">TextInfo</p-button>
        </ng-container>
        <ng-container *ngIf="this.textModalRendered">
            <p-button (onClick)="this.doNotPrintTextModal()">no TextInfo</p-button>
            <div style="background-color: #d3d3d3; margin: 10px; padding: 10px;"> 
                <ng-container *ngFor="let textToHtml of this.textToHtmlRetriever.getAllElements()">
                    <ng-container *ngIf="textToHtml.surround == true">
                        <p>A entourer par <strong>{{ textToHtml.text }}</strong> pour => {{ textToHtml.name }}</p>
                    </ng-container>
                    <ng-container *ngIf="textToHtml.surround == false">
                        <p>Commencer par <strong>{{ textToHtml.text }}</strong> pour => {{ textToHtml.name }}</p>
                    </ng-container>
                </ng-container>
            </div>
        </ng-container>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <p-dropdown [options]="this.policeTab" [(ngModel)]="this.textPolice">Police</p-dropdown>
            <p-colorPicker [(ngModel)]="this.textColor"></p-colorPicker>
            <p-knob [(ngModel)]="this.textSize" [min]="12" [max]="48">textSize</p-knob>
        </div>
    </ng-container>
    <div style="display: flex; align-items: center; gap: 1rem;">
        <p-dropdown [options]="this.dropdownTab" (onChange)="this.loadLayoutDataDropdown($event)">Load</p-dropdown>
        <input type="text" pInputText [(ngModel)]="this.textValue" />
    </div>
    <p-fileUpload #fileUploader
    mode="basic"
    customUpload="true"
    (uploadHandler)="upload($event)">
    </p-fileUpload>
    <div>{{ this.componentFacade.layoutManager.layoutData.hasBeenSaved }}</div>
    <div>{{ this.componentFacade.imageDataUtils.hasBeenSaved }}</div>
</ng-container>
<div [style]="getImageUrl()">
    <div  [style]="this.getImageBackgroundStyle()">
        <ng-container *ngIf="this.componentFacade.layoutManager.layoutData">
            <div [innerHTML]="this.stringToHtml()" [style]="textStyle()"></div>
        </ng-container>
    </div>
</div>
